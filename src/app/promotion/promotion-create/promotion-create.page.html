<app-header-bar></app-header-bar>
<app-divider></app-divider>

<app-container>
    <!-- ✅ 미리보기: 페이지 가장 위 -->
    <section class="preview">
        <ng-container *ngIf="preview; else emptyPreview">
            <app-promo-banner [promotion]="preview" [index]="0" [total]="1" [isAdmin]="true">
            </app-promo-banner>
        </ng-container>
        <ng-template #emptyPreview>
            <div class="preview-empty">이미지 URL을 입력하면 미리보기가 보여요</div>
        </ng-template>
    </section>

    <!-- ✅ 입력 폼 -->
    <section class="form">
        <div class="field">
            <label class="label">이미지 URL</label>
            <input class="input" type="url" placeholder="https://example.com/banner.jpg"
                [formControl]="form.controls.image_url">
            <div class="help" *ngIf="form.controls.image_url.invalid && form.controls.image_url.touched">
                올바른 URL을 입력해 주세요.
            </div>
        </div>

        <!-- ✅ 게시 위치: 버튼 토글 (메인/스토어 중 택1) -->
        <div class="field">
            <label class="label">게시 위치</label>
            <div class="toggle-group" role="tablist" aria-label="게시 위치 선택">
                <button type="button" class="toggle" [class.active]="form.value.placement === 'MAIN'"
                    (click)="setPlacement('MAIN')" role="tab" [attr.aria-selected]="form.value.placement === 'MAIN'">
                    메인 페이지
                </button>
                <button type="button" class="toggle" [class.active]="form.value.placement === 'GIFT_CARD'"
                    (click)="setPlacement('GIFT_CARD')" role="tab"
                    [attr.aria-selected]="form.value.placement === 'GIFT_CARD'">
                    스토어
                </button>
            </div>
        </div>
    </section>

    <!-- 아래 공간 확보(고정 버튼과 겹치지 않도록) -->
    <div class="bottom-spacer"></div>
</app-container>

<footer class="submit-bar">
    <app-container>
        <button class="btn-primary" (click)="onSubmit()" [disabled]="form.invalid || saving">
            {{ saving ? '저장 중…' : '작성하기' }}
        </button>
    </app-container>
</footer>